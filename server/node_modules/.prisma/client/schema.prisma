generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model System {
  id         String   @id @default(uuid())
  seed       String   @unique
  name       String
  starType   String
  starColor  String
  starRadius Float
  createdAt  DateTime @default(now())
  planets    Planet[]
}

model Planet {
  id         String @id @default(uuid())
  systemId   String
  system     System @relation(fields: [systemId], references: [id])
  distance   Float
  radius     Float
  color      String
  orbitSpeed Float
  angle      Float

  // Gameplay Data
  biome        String  @default("Barren")
  resources    String  @default("[]")
  habitability Float   @default(0.0)
  scanned      Boolean @default(false)

  // Civilization Data
  civilization   Civilization? @relation(fields: [civilizationId], references: [id])
  civilizationId String?
}

model Civilization {
  id          String @id @default(uuid())
  name        String
  description String // Procedural description
  techLevel   Int // 0 = Stone Age, 10 = Transcendent
  government  String // e.g. "Hive Mind", "Technocracy"
  ethics      String // JSON string ["Militarist", "Materialist"]

  species   Species? @relation(fields: [speciesId], references: [id])
  speciesId String?  @unique

  planets Planet[]

  historyLogs String // JSON string of historical events
  createdAt   DateTime @default(now())
}

model Species {
  id          String @id @default(uuid())
  name        String
  type        String // e.g. "Reptilian", "Synthetic"
  traits      String // JSON string ["Telepathic", "Aquatic"]
  description String

  civilization Civilization?
}
